<?php

/*
 * Bryce Schmisseur and Hermes Mimini
 * Job Match Application
 * UserBusinessService.php
 *
 */

namespace App\business;

use App\model\User;
use App\data\UserDataService;

class UserBusinessService implements UserBusinessInterface{
    
    private $dataService;
    
    
    /**
     * 
     * {@inheritDoc}
     * @see \App\business\BusinessServiceInterface::authenticateUser()
     */
    public function authenticateUser(User $user)
    {
        $validUser = false;
        $usersList = $this->dataService->viewAllUsers();
        
        for($i = 0; $i < count($usersList); $i++)
        {
            $currentUser = $usersList[$i];
            
            if(strcmp($currentUser->getUserName(), $user->getUserName()) == 0 && strcmp($currentUser->getPassword(), $user->getPassword()) == 0)
            {
                $validUser = true;
                $_SESSION['currentUser'] = $currentUser;
            }
        }
        
        return $validUser;
    }
}