<?php

/*
 * Bryce Schmisseur and Hermes Mimini
 * Job Match Application
 * LoginRegistrationController.php
 *
 */

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Routing\Controller;
use App\business\UserBusinessService; 

class AdminController extends Controller
{
    private $service;
    
    function __construct()
    {
        $this->service = new UserBusinessService();
    }
    
    public function adminPage()
    {
        $data = ['userList' => $this->service->viewAll()];
        return view('admin')->with($data); 
    }
    
    public function deleteUser(Request $request)
    {
        
    }
    
    public function suspendUser(Request $request)
    {
        $userId = $request->input('userId');
        
        echo("<script>console.log('Within Suspend User with User id: " . $userId . "');</script>");
        
        $currentUser = $this->service->viewById($userId);
        echo("<script>console.log('Within Suspend User with boolean before: " . $currentUser->isActive() . "');</script>");
        $currentUser->setActive(!$currentUser->isActive());
        
        $data = ['userList' => $this->service->viewAll()];
        return view('admin')->with($data); 
    }
}
